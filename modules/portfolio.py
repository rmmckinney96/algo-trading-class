import pandas as pd
import numpy as np

def calculate_strategy_returns(signals, price_data):
    """Calculate returns for each strategy-symbol combination"""
    # Implementation remains the same
    ...

def calculate_portfolio_returns(strategy_returns, rebalance_threshold=0.05):
    """Calculate portfolio returns with equal weight allocation and threshold rebalancing"""
    # Implementation remains the same
    ...

def calculate_risk_metrics(returns_series, strategy_name=None):
    """Calculate key risk metrics for a return series"""
    # Implementation remains the same
    ... 